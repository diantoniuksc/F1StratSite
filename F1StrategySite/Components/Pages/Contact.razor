@page "/contact"

<script src="/js/rateLimiter.js"></script>
<script>rateLimitPageLoads(15, 60000, 'contact:loads');</script>

<section class="contact-root flex flex-col items-center justify-center px-6 py-16">
    <div class="contact-card max-w-2xl w-full rounded-2xl shadow-lg p-8">
        <h1 class="text-3xl font-bold text-center mb-6">Contact Us</h1>
        <p class="contact-secondary text-center mb-8">
            We'd love to hear from you. Whether you have a question about features, data sources, 
            collaboration ideas or just want to say hello, feel free to reach out.
        </p>

        <div class="space-y-6">
            <!-- Email -->
            <div class="flex items-center space-x-4">
                <img src="Images/Email.png" alt="Email Icon" class="w-10 h-9"/>
                <div>
                    <h2 class="font-semibold text-lg">Email</h2>
                    <a href="mailto:antoniukdin@gmail.com" class="contact-link">antoniukdin@gmail.com</a>
                </div>
            </div>

            <!-- LinkedIn -->
            <div class="flex items-center space-x-4">
                <img src="Images/Linkedin.png" alt="LinkedIn Icon" class="w-10 h-10"/>
                <div>
                    <h2 class="font-semibold text-lg">LinkedIn</h2>
                    <a href="https://www.linkedin.com/in/d%D1%96ana-antoniuk-067b28362/" 
                       target="_blank" class="contact-link">
                       Diana Antoniuk
                    </a>
                </div>
            </div>
        </div>

        <!-- Optional contact form -->
        <div class="mt-10 border-t border-[var(--contact-border-color)] pt-6">
            <h2 class="text-xl font-semibold mb-4">Send a Message</h2>
            <form class="space-y-4" onsubmit="return false;">

                <input type="text" placeholder="Your Name" @bind="name"
                    class="contact-input" required />

                <input type="text" placeholder="Subject" @bind="subject"
                    class="contact-input" required />

                <textarea rows="5" placeholder="Your Message" @bind="message"
                    class="contact-input" required></textarea>

                <button type="button" @onclick="SendMail" 
                    class="contact-button">
                    Open E-Mail
                </button>
            </form>
        </div>
    </div>
</section>

@code {
    private string name = "";
    private string subject = "";
    private string message = "";

    private void SendMail()
    {
        var body = Uri.EscapeDataString($"Name: {name}\nMessage:\n{message}");
        var mailto = $"mailto:antoniukdin@gmail.com?subject={Uri.EscapeDataString(subject)}&body={body}";
        JS.InvokeVoidAsync("open", mailto); // open email client

        subject = "";
        message = "";
    }

    [Inject] private IJSRuntime JS { get; set; }
}
