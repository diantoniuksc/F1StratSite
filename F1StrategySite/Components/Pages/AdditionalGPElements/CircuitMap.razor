@using Microsoft.JSInterop

<div id="map" style="width:100%;height:400px;border-radius:12px;overflow:hidden;"></div>

@code {
    [Parameter] public double Latitude { get; set; }
    [Parameter] public double Longitude { get; set; }
    [Inject] private IJSRuntime JS { get; set; }

    private double localLat;
    private double localLon;

    protected override void OnParametersSet()
    {
        localLat = Latitude;
        localLon = Longitude;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (localLat != 0 && localLon != 0)
        {
            await JS.InvokeVoidAsync("initCircuitMap", localLat, localLon);
        }
    }
}