@using Microsoft.JSInterop

<div id="map" style="width:100%;height:400px;border-radius:12px;overflow:hidden;"></div>

@code {
    [Parameter] public double Latitude { get; set; }
    [Parameter] public double Longitude { get; set; }
    [Inject] private IJSRuntime JS { get; set; }

    private double _localLat;
    private double _localLon;

    protected override void OnParametersSet()
    {
        _localLat = Latitude;
        _localLon = Longitude;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (_localLat != 0 && _localLon != 0)
        {
            await JS.InvokeVoidAsync("initCircuitMap", _localLat, _localLon);
        }
    }
}